"use strict";
Object.defineProperty(exports, "__esModule", { value: true });
const _internal_1 = require("@marblejs/core/dist/+internal");
const json_body_parser_1 = require("./json.body.parser");
const text_body_parser_1 = require("./text.body.parser");
const raw_body_parser_1 = require("./raw.body.parser");
const url_body_parser_1 = require("./url.body.parser");
exports.defaultParser = reqOrContentType => body => {
    const contentType = typeof reqOrContentType === 'string'
        ? reqOrContentType
        : _internal_1.getContentType(reqOrContentType.headers);
    switch (contentType) {
        case _internal_1.ContentType.APPLICATION_JSON:
            return json_body_parser_1.jsonParser(reqOrContentType)(body);
        case _internal_1.ContentType.APPLICATION_X_WWW_FORM_URLENCODED:
            return url_body_parser_1.urlEncodedParser(reqOrContentType)(body);
        case _internal_1.ContentType.APPLICATION_OCTET_STREAM:
            return raw_body_parser_1.rawParser(reqOrContentType)(body);
        case _internal_1.ContentType.TEXT_PLAIN:
            return text_body_parser_1.textParser(reqOrContentType)(body);
        default:
            return undefined;
    }
};
