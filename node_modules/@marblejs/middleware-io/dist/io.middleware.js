"use strict";
Object.defineProperty(exports, "__esModule", { value: true });
const operators_1 = require("rxjs/operators");
const io_reporter_1 = require("./io.reporter");
const io_error_1 = require("./io.error");
const validateError = (reporter = io_reporter_1.defaultReporter, context) => (result) => result.getOrElseL(() => {
    throw new io_error_1.IOError('Validation error', reporter.report(result), context);
});
exports.validator$ = (schema, options = {}) => (i$) => !!schema ? i$.pipe(operators_1.map(input => schema.decode(input)), operators_1.map(validateError(options.reporter, options.context)), operators_1.map(input => input)) : i$;
