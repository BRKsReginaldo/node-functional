"use strict";
Object.defineProperty(exports, "__esModule", { value: true });
const utils_1 = require("@marblejs/core/dist/+internal/utils");
const getPath = (context) => context
    .map(c => c.key)
    .filter(Boolean)
    .join('.');
const getExpectedType = (context) => utils_1.getLast(context)
    .map(c => c.type.name)
    .getOrElse('any');
const getErrorMessage = (value, context) => ({
    path: getPath(context),
    expected: getExpectedType(context),
    got: utils_1.stringify(value),
});
const failure = (errors) => errors.map(error => getErrorMessage(error.value, error.context));
const success = () => [];
exports.defaultReporter = {
    report: validation => validation.fold(failure, success),
};
