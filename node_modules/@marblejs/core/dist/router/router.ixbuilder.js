"use strict";
Object.defineProperty(exports, "__esModule", { value: true });
const IxBuilder_1 = require("../+internal/fp/IxBuilder");
const effects_combiner_1 = require("../effects/effects.combiner");
const route = new IxBuilder_1.IxBuilder({});
const matchPath = (path) => IxBuilder_1.ichainCurry((spec) => new IxBuilder_1.IxBuilder(Object.assign({}, spec, { path })));
const matchType = (method) => IxBuilder_1.ichainCurry((spec) => new IxBuilder_1.IxBuilder(Object.assign({}, spec, { method })));
const use = (middleware) => IxBuilder_1.ichainCurry((spec) => new IxBuilder_1.IxBuilder(Object.assign({}, spec, { middleware: spec.middleware
        ? effects_combiner_1.combineMiddlewares(spec.middleware, middleware)
        : middleware })));
const useEffect = (effect) => IxBuilder_1.ichainCurry((spec) => new IxBuilder_1.IxBuilder(Object.assign({}, spec, { effect })));
const applyMeta = (meta) => IxBuilder_1.ichainCurry((spec) => new IxBuilder_1.IxBuilder(Object.assign({}, spec, { meta: Object.assign({}, spec.meta, meta) })));
function pipe(...fns) {
    return fns.reduce((prevFn, nextFn) => value => nextFn(prevFn(value)), value => value)(route).run();
}
exports.r = { matchPath, matchType, use, useEffect, applyMeta, pipe };
