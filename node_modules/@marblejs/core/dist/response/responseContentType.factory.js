"use strict";
Object.defineProperty(exports, "__esModule", { value: true });
const fileType = require("file-type");
const mime = require("mime");
const _internal_1 = require("../+internal");
exports.DEFAULT_CONTENT_TYPE = _internal_1.ContentType.APPLICATION_JSON;
exports.getMimeType = (body, path) => {
    const mimeFromBuffer = Buffer.isBuffer(body) && fileType(body);
    return mimeFromBuffer
        ? mimeFromBuffer.mime
        : mime.getType(path) || exports.DEFAULT_CONTENT_TYPE;
};
exports.contentTypeFactory = (data) => ({
    'Content-Type': data.status === 200
        ? exports.getMimeType(data.body, data.path)
        : exports.DEFAULT_CONTENT_TYPE,
});
